# 클린 아키텍처에는 대가가 따른다

도메인 계층이 영속성이나 UI같은 외부 계층과 철저하게 분리되려면, 애플리케이션의 엔티티에 대한 모델을 각 계층에서 유지보수해야 한다.

도메인 계층은 영속성 계층을 모르게하고싶다.

그렇다면 도메인 계층에서 사용한 엔티티 클래스를 영속성 계층에서 함게 사용할 수 없고 두 계층에서 각각 엔티티를 만들어야한다. 즉, 도메인 계층과 영속성 계층이 데이터를 주고받을 때, 두 엔티티를 서로 변환해야 한다는 뜻이다. 이는 도메인 계층과 다른 계층들 사이에서도 마찬가지다.

하지만 이것은 바람직한 일이다. 이것이 바로 도메인 코드를 프레임워크에 특화된 문제로부터 해방시키고자 했던, 결합이 제거된 상태다.

가령, JPA에서는 ORM이 관리하는 엔티티에 인자가 없는 기본 생성자를 추가하도록 강제한다. 이런 경우가, 도메인 모델이 프레임워크에 특화된 결합의 예이고, 피해야하는 상황이 되겠다.
